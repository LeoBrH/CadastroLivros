<div class="container mt-4">
    <h3>Gerenciamento do Livro: {{ livro?.titulo }}</h3>

    <div class="accordion" id="accordionRelacionamentos">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingAutores">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseAutores" aria-expanded="true" aria-controls="collapseAutores">
                    Autores
                </button>
            </h2>
            <div id="collapseAutores" class="accordion-collapse collapse" aria-labelledby="headingAutores"
                data-bs-parent="#accordionRelacionamentos">
                <div class="accordion-body">
                    <div class="input-group mb-3">
                        <select class="form-select" [(ngModel)]="selectedAutor">
                            <option *ngFor="let autor of autores" [value]="autor.codAu">{{ autor.nome }}</option>
                        </select>
                        <button class="btn btn-primary" (click)="vincularAutor()">Vincular Autor</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Código</th>
                                <th scope="col">Nome</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let autor of autoresAdicionados">
                                <td>{{ autor.codAu }}</td>
                                <td>{{ autor.nome }}</td>
                                <td>
                                    <button class="btn btn-danger"
                                        (click)="desvincularAutor(autor.codAu)">Desvincular</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="headingAssuntos">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseAssuntos" aria-expanded="false" aria-controls="collapseAssuntos">
                    Assuntos
                </button>
            </h2>
            <div id="collapseAssuntos" class="accordion-collapse collapse" aria-labelledby="headingAssuntos"
                data-bs-parent="#accordionRelacionamentos">
                <div class="accordion-body">
                    <div class="input-group mb-3">
                        <select class="form-select" [(ngModel)]="selectedAssunto">
                            <option *ngFor="let assunto of assuntos" [value]="assunto.codAs">{{ assunto.descricao }}
                            </option>
                        </select>
                        <button class="btn btn-primary" (click)="vincularAssunto()">Vincular Assunto</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Código</th>
                                <th scope="col">Descrição</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let assunto of assuntosAdicionados">
                                <td>{{ assunto.codAs }}</td>
                                <td>{{ assunto.descricao }}</td>
                                <td>
                                    <button class="btn btn-danger"
                                        (click)="desvincularAssunto(assunto.codAs)">Desvincular</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="headingFormasCompra">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFormasCompra" aria-expanded="false" aria-controls="collapseFormasCompra">
                    Formas de Compra
                </button>
            </h2>
            <div id="collapseFormasCompra" class="accordion-collapse collapse" aria-labelledby="headingFormasCompra"
                data-bs-parent="#accordionRelacionamentos">
                <div class="accordion-body">
                    <div class="input-group mb-3">
                        <select class="form-select" [(ngModel)]="selectedFormaCompra">
                            <option *ngFor="let forma of formasCompra" [value]="forma.codFC">{{ forma.descricao }}
                            </option>
                        </select>
                        <span class="input-group-text">R$</span>
                        <input type="text" class="form-control fit-width" placeholder="0.00"
                            [value]="valorFormaCompra | number:'1.2-2'" (input)="formatarMoeda($event)">
                        <button class="btn btn-primary" (click)="vincularValor()">Vincular Valor</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Forma de Compra</th>
                                <th scope="col">Valor</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let valor of valoresAdicionados">
                                <td>{{ valor.formaCompra.descricao }}</td>
                                <td>R$ {{ valor.valor }}</td>
                                <td>
                                    <button class="btn btn-danger"
                                        (click)="desvincularValor(valor.forma_Compra_CodFC)">Desvincular</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>